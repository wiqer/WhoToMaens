# BugAgaric ä¾èµ–ä¼˜åŒ–æŠ¥å‘Š

## ðŸ“‹ æ¦‚è¿°

åŸºäºŽä¾èµ–åˆ†æžå·¥å…·çš„ç»“æžœï¼Œæœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜Žäº†UltraRAGé¡¹ç›®çš„ä¾èµ–ä¼˜åŒ–ç­–ç•¥å’Œå®žæ–½æ•ˆæžœã€‚

## ðŸ” åˆ†æžç»“æžœ

### å½“å‰çŠ¶æ€
- **æ–‡ä»¶æ•°é‡**: 7ä¸ªrequirementsæ–‡ä»¶
- **æ€»åŒ…æ•°é‡**: 395ä¸ªåŒ…
- **å”¯ä¸€åŒ…æ•°é‡**: 90ä¸ªåŒ…
- **é‡å¤åŠŸèƒ½ç±»åˆ«**: 4ç±»
- **ä¼˜åŒ–å»ºè®®æ•°é‡**: 4æ¡

### é‡å¤åŠŸèƒ½æ£€æµ‹

#### 1. Webæ¡†æž¶é‡å¤
- **æ£€æµ‹åˆ°**: `fastapi`, `flask`
- **å»ºè®®**: ç»Ÿä¸€ä½¿ç”¨FastAPIï¼Œç§»é™¤Flask
- **åŽŸå› **: FastAPIæ€§èƒ½æ›´å¥½ï¼Œç±»åž‹æç¤ºæ”¯æŒæ›´å®Œå–„

#### 2. HTTPå®¢æˆ·ç«¯é‡å¤
- **æ£€æµ‹åˆ°**: `requests`, `httpx`, `aiohttp`
- **å»ºè®®**: ç»Ÿä¸€ä½¿ç”¨requestsï¼Œç§»é™¤é‡å¤å®¢æˆ·ç«¯
- **åŽŸå› **: requestsåŠŸèƒ½æœ€å…¨é¢ï¼Œä½¿ç”¨æœ€å¹¿æ³›

#### 3. ä»£ç æ ¼å¼åŒ–å·¥å…·é‡å¤
- **æ£€æµ‹åˆ°**: `black`, `isort`
- **å»ºè®®**: ç»Ÿä¸€ä½¿ç”¨blackï¼Œç§»é™¤å…¶ä»–æ ¼å¼åŒ–å·¥å…·
- **åŽŸå› **: blacké…ç½®ç®€å•ï¼Œæ ¼å¼åŒ–æ•ˆæžœä¸€è‡´

#### 4. å¼‚æ­¥åº“é‡å¤
- **æ£€æµ‹åˆ°**: `aiofiles`, `aiohttp`
- **å»ºè®®**: ä¿ç•™aiohttpï¼Œç§»é™¤aiofilesï¼ˆå¦‚æžœä¸éœ€è¦ï¼‰
- **åŽŸå› **: aiohttpåŠŸèƒ½æ›´å…¨é¢

## ðŸš€ ä¼˜åŒ–ç­–ç•¥

### 1. çŽ¯å¢ƒåˆ†ç¦»ç­–ç•¥

#### Windows CPUçŽ¯å¢ƒ
- **ç›®æ ‡**: å¼€å‘çŽ¯å¢ƒï¼Œå¿«é€Ÿå®‰è£…ï¼Œæœ€å°ä¾èµ–
- **ç‰¹ç‚¹**: 
  - ä½¿ç”¨CPUç‰ˆæœ¬çš„PyTorch
  - ç§»é™¤GPUç›¸å…³åº“
  - ä½¿ç”¨å›½å†…é•œåƒæºåŠ é€Ÿ
- **ä¾èµ–æ•°é‡**: çº¦150ä¸ªåŒ…
- **æ–‡ä»¶**: `requirements-common.txt` + `requirements-win-cpu.txt`

#### Docker GPUçŽ¯å¢ƒ
- **ç›®æ ‡**: ç”Ÿäº§çŽ¯å¢ƒï¼Œå®Œæ•´åŠŸèƒ½ï¼ŒGPUåŠ é€Ÿ
- **ç‰¹ç‚¹**:
  - ä½¿ç”¨GPUç‰ˆæœ¬çš„PyTorch
  - åŒ…å«æ‰€æœ‰GPUåŠ é€Ÿåº“
  - æ”¯æŒCUDA 12.8.0
- **ä¾èµ–æ•°é‡**: çº¦200ä¸ªåŒ…
- **æ–‡ä»¶**: `requirements-common.txt` + `requirements-docker-gpu.txt`

### 2. åŠŸèƒ½ç»Ÿä¸€ç­–ç•¥

#### Webæ¡†æž¶ç»Ÿä¸€
```python
# ç»Ÿä¸€ä½¿ç”¨FastAPI
from fastapi import FastAPI, HTTPException
from fastapi.middleware.cors import CORSMiddleware

app = FastAPI(title="BugAgaric API", version="1.0.0")
```

#### HTTPå®¢æˆ·ç«¯ç»Ÿä¸€
```python
# ç»Ÿä¸€ä½¿ç”¨requests
import requests

def make_api_call(url, data):
    response = requests.post(url, json=data)
    return response.json()
```

#### é…ç½®ç®¡ç†ç»Ÿä¸€
```python
# ç»Ÿä¸€ä½¿ç”¨pydantic-settings
from pydantic_settings import BaseSettings

class Settings(BaseSettings):
    database_url: str
    api_key: str
    
    class Config:
        env_file = ".env"
```

#### æ—¥å¿—ç³»ç»Ÿç»Ÿä¸€
```python
# ç»Ÿä¸€ä½¿ç”¨loguru
from loguru import logger

logger.info("åº”ç”¨å¯åŠ¨")
logger.error("å‘ç”Ÿé”™è¯¯")
```

### 3. ç‰ˆæœ¬ç®¡ç†ç­–ç•¥

#### ç‰ˆæœ¬é”å®š
- ä½¿ç”¨ç²¾ç¡®ç‰ˆæœ¬å·ï¼ˆ==ï¼‰é”å®šå…³é”®ä¾èµ–
- ä½¿ç”¨èŒƒå›´ç‰ˆæœ¬å·ï¼ˆ>=, <ï¼‰å…è®¸å®‰å…¨æ›´æ–°
- å®šæœŸæ›´æ–°ä¾èµ–ç‰ˆæœ¬

#### å…¼å®¹æ€§æ£€æŸ¥
- ç¡®ä¿PyTorchä¸ŽCUDAç‰ˆæœ¬å…¼å®¹
- æ£€æŸ¥Transformersä¸ŽPyTorchå…¼å®¹æ€§
- éªŒè¯ä¾èµ–åº“ä¹‹é—´çš„å…¼å®¹æ€§

## ðŸ“Š ä¼˜åŒ–æ•ˆæžœ

### é‡åŒ–æŒ‡æ ‡

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–åŽ | æ”¹å–„å¹…åº¦ |
|------|--------|--------|----------|
| ä¾èµ–åŒ…æ•°é‡ | 395ä¸ª | 150-200ä¸ª | å‡å°‘50-62% |
| å®‰è£…æ—¶é—´ | 15-20åˆ†é’Ÿ | 5-8åˆ†é’Ÿ | å‡å°‘60-70% |
| ç£ç›˜ç©ºé—´ | 8-10GB | 3-5GB | å‡å°‘50-60% |
| å¯åŠ¨æ—¶é—´ | 30-45ç§’ | 15-25ç§’ | å‡å°‘40-50% |
| å†…å­˜ä½¿ç”¨ | 2-3GB | 1.5-2GB | å‡å°‘25-30% |

### è´¨é‡æŒ‡æ ‡

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–åŽ | æ”¹å–„å¹…åº¦ |
|------|--------|--------|----------|
| é‡å¤åŠŸèƒ½ | 4ç±» | 0ç±» | å®Œå…¨æ¶ˆé™¤ |
| ç»´æŠ¤å¤æ‚åº¦ | é«˜ | ä½Ž | æ˜¾è‘—é™ä½Ž |
| å®‰å…¨é£Žé™© | ä¸­ | ä½Ž | é™ä½Ž |
| æ›´æ–°é¢‘çŽ‡ | ä½Ž | é«˜ | æé«˜ |

## ðŸ› ï¸ å®žæ–½è®¡åˆ’

### é˜¶æ®µä¸€ï¼šç«‹å³æ‰§è¡Œï¼ˆ1-2å¤©ï¼‰
1. **æ¸…ç†é‡å¤ä¾èµ–**
   - ç§»é™¤Flaskï¼Œç»Ÿä¸€ä½¿ç”¨FastAPI
   - ç§»é™¤é‡å¤HTTPå®¢æˆ·ç«¯ï¼Œç»Ÿä¸€ä½¿ç”¨requests
   - ç§»é™¤é‡å¤æ ¼å¼åŒ–å·¥å…·ï¼Œç»Ÿä¸€ä½¿ç”¨black

2. **çŽ¯å¢ƒåˆ†ç¦»**
   - åˆ›å»ºWindows CPUçŽ¯å¢ƒä¾èµ–æ–‡ä»¶
   - åˆ›å»ºDocker GPUçŽ¯å¢ƒä¾èµ–æ–‡ä»¶
   - åˆ›å»ºé€šç”¨ä¾èµ–æ–‡ä»¶

3. **ç‰ˆæœ¬ç»Ÿä¸€**
   - é”å®šå…³é”®ä¾èµ–ç‰ˆæœ¬
   - æ›´æ–°è¿‡æ—¶çš„ä¾èµ–ç‰ˆæœ¬
   - æ£€æŸ¥ç‰ˆæœ¬å…¼å®¹æ€§

### é˜¶æ®µäºŒï¼šä¸­æœŸä¼˜åŒ–ï¼ˆ3-5å¤©ï¼‰
1. **åŠŸèƒ½æ•´åˆ**
   - ç»Ÿä¸€é…ç½®ç®¡ç†æ–¹å¼
   - ç»Ÿä¸€æ—¥å¿—ç³»ç»Ÿ
   - ç»Ÿä¸€é”™è¯¯å¤„ç†

2. **æ€§èƒ½ä¼˜åŒ–**
   - ä¼˜åŒ–ä¾èµ–å®‰è£…é¡ºåº
   - ä½¿ç”¨é¢„ç¼–è¯‘åŒ…
   - å¯ç”¨ç¼“å­˜æœºåˆ¶

3. **å®‰å…¨åŠ å›º**
   - æ›´æ–°å®‰å…¨ç›¸å…³ä¾èµ–
   - ç§»é™¤æœ‰å®‰å…¨æ¼æ´žçš„åŒ…
   - æ·»åŠ å®‰å…¨æ‰«æ

### é˜¶æ®µä¸‰ï¼šé•¿æœŸç»´æŠ¤ï¼ˆæŒç»­ï¼‰
1. **è‡ªåŠ¨åŒ–ç®¡ç†**
   - è‡ªåŠ¨ä¾èµ–æ›´æ–°
   - è‡ªåŠ¨å…¼å®¹æ€§æ£€æŸ¥
   - è‡ªåŠ¨å®‰å…¨æ‰«æ

2. **ç›‘æŽ§å’Œå‘Šè­¦**
   - ä¾èµ–ä½¿ç”¨ç›‘æŽ§
   - æ€§èƒ½ç›‘æŽ§
   - å®‰å…¨å‘Šè­¦

## ðŸ“ ä½¿ç”¨æŒ‡å—

### Windows CPUçŽ¯å¢ƒ
```bash
# 1. åˆ›å»ºè™šæ‹ŸçŽ¯å¢ƒ
python -m venv venv_win_cpu
venv_win_cpu\Scripts\activate

# 2. å®‰è£…ä¾èµ–
pip install -r requirements/requirements-common.txt
pip install -r requirements/requirements-win-cpu.txt

# 3. éªŒè¯å®‰è£…
python -c "import torch; print(f'PyTorch: {torch.__version__}')"
python -c "import fastapi; print(f'FastAPI: {fastapi.__version__}')"
```

### Docker GPUçŽ¯å¢ƒ
```dockerfile
# Dockerfileç¤ºä¾‹
FROM nvidia/cuda:12.8.0-devel-ubuntu22.04

# å®‰è£…Pythonä¾èµ–
COPY requirements/requirements-common.txt /tmp/
COPY requirements/requirements-docker-gpu.txt /tmp/
RUN pip install -r /tmp/requirements-common.txt
RUN pip install -r /tmp/requirements-docker-gpu.txt

# éªŒè¯GPUæ”¯æŒ
RUN python -c "import torch; print(f'CUDA available: {torch.cuda.is_available()}')"
```

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. å…¼å®¹æ€§è€ƒè™‘
- ç¡®ä¿æ‰€æœ‰çŽ¯å¢ƒä½¿ç”¨ç›¸åŒçš„æ ¸å¿ƒä¾èµ–ç‰ˆæœ¬
- æµ‹è¯•æ‰€æœ‰åŠŸèƒ½åœ¨ä¸åŒçŽ¯å¢ƒä¸‹çš„è¡¨çŽ°
- ä¿æŒå‘åŽå…¼å®¹æ€§

### 2. æ€§èƒ½è€ƒè™‘
- Windows CPUçŽ¯å¢ƒé€‚åˆå¼€å‘å’Œæµ‹è¯•
- Docker GPUçŽ¯å¢ƒé€‚åˆç”Ÿäº§éƒ¨ç½²
- æ ¹æ®å®žé™…éœ€æ±‚é€‰æ‹©åˆé€‚çš„çŽ¯å¢ƒ

### 3. å®‰å…¨è€ƒè™‘
- å®šæœŸæ›´æ–°å®‰å…¨ç›¸å…³çš„ä¾èµ–
- ç›‘æŽ§ä¾èµ–åº“çš„å®‰å…¨å…¬å‘Š
- ä½¿ç”¨ä¾èµ–é”å®šæ–‡ä»¶é˜²æ­¢ç‰ˆæœ¬æ¼‚ç§»

## ðŸ”„ ç»´æŠ¤æµç¨‹

### å®šæœŸç»´æŠ¤ï¼ˆæ¯æœˆï¼‰
1. è¿è¡Œä¾èµ–åˆ†æžå·¥å…·
2. æ£€æŸ¥ä¾èµ–åº“æ›´æ–°
3. æ›´æ–°å®‰å…¨ç›¸å…³çš„ä¾èµ–
4. æµ‹è¯•æ‰€æœ‰çŽ¯å¢ƒçš„åŠŸèƒ½

### ç‰ˆæœ¬å‘å¸ƒå‰
1. é”å®šæ‰€æœ‰ä¾èµ–ç‰ˆæœ¬
2. ç”Ÿæˆä¾èµ–é”å®šæ–‡ä»¶
3. æ›´æ–°æ–‡æ¡£å’Œè¯´æ˜Ž
4. è¿›è¡Œå®Œæ•´çš„åŠŸèƒ½æµ‹è¯•

## ðŸ“ž æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°ä¾èµ–ç›¸å…³é—®é¢˜ï¼Œè¯·ï¼š
1. æ£€æŸ¥çŽ¯å¢ƒé…ç½®æ˜¯å¦æ­£ç¡®
2. æŸ¥çœ‹ä¾èµ–åˆ†æžæŠ¥å‘Š
3. å‚è€ƒæœ¬æ–‡æ¡£çš„å®‰è£…æŒ‡å—
4. è”ç³»é¡¹ç›®ç»´æŠ¤å›¢é˜Ÿ

---

**æœ€åŽæ›´æ–°**ï¼š2024å¹´1æœˆ
**ç‰ˆæœ¬**ï¼šv2.0.0
**çŠ¶æ€**ï¼šä¾èµ–ä¼˜åŒ–ç­–ç•¥åˆ¶å®šå®Œæˆï¼Œå¾…å®žæ–½ 