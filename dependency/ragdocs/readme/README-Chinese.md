<div align="center">
    <img src="../assets/logo.png" alt="BugAgaric Logo" width="450">
</div>
<p align="center">
    ã€<a href="../README.md">English</a>   | Chineseã€‘
</p>


## ğŸ“– æ¦‚è¿°

**BugAgaric æ¡†æ¶**ç”±æ¸…åå¤§å­¦THUNLPè”åˆä¸œåŒ—å¤§å­¦NEUIRã€é¢å£æ™ºèƒ½å›¢é˜ŸåŠ9#AISoftå›¢é˜Ÿå…±åŒæå‡ºï¼ŒåŸºäºæ•æ·åŒ–éƒ¨ç½²ä¸æ¨¡å—åŒ–æ„é€ ï¼Œå¼•å…¥äº†è‡ªåŠ¨åŒ–çš„â€œæ•°æ®æ„å»º-æ¨¡å‹å¾®è°ƒ-æ¨ç†è¯„æµ‹â€çŸ¥è¯†é€‚é…æŠ€æœ¯ä½“ç³»ï¼Œæä¾›äº†ä¸€ç«™å¼ã€ç§‘ç ”ä¸å¼€å‘åŒé‡å‹å¥½çš„ RAG ç³»ç»Ÿè§£å†³æ–¹æ¡ˆã€‚BugAgaric æ˜¾è‘—ç®€åŒ–äº† RAG ç³»ç»Ÿåœ¨é¢†åŸŸé€‚é…è¿‡ç¨‹ä¸­ï¼Œä»æ•°æ®æ„å»ºåˆ°æ¨¡å‹å¾®è°ƒçš„å…¨æµç¨‹ï¼ŒåŠ©åŠ›ç§‘ç ”äººå‘˜ä¸å¼€å‘è€…é«˜æ•ˆåº”å¯¹å¤æ‚ä»»åŠ¡ï¼š

<div align="center">
    <img src='../assets/zh/feature.png' width=600>
</div>

- **é›¶ä»£ç ç¼–ç¨‹WebUIæ”¯æŒï¼š** é›¶ç¼–ç¨‹ç»éªŒç”¨æˆ·äº¦å¯ä¸Šæ‰‹æ“ä½œå…¨é“¾è·¯æ­å»ºå’Œä¼˜åŒ–è¿‡ç¨‹ï¼ŒåŒ…æ‹¬ **å¤šæ¨¡æ€RAGæ–¹æ¡ˆVisRAG** ï¼›
- **åˆæˆä¸å¾®è°ƒä¸€é”®å¼è§£å†³ï¼š** ä»¥è‡ªç ”**KBAlignã€RAG-DDR**ç­‰æ–¹æ³•ä¸ºæ ¸å¿ƒï¼Œä¸€é”®å¼ç³»ç»ŸåŒ–æ•°æ®æ„å»º + æ£€ç´¢ã€ç”Ÿæˆæ¨¡å‹å¤šæ ·å¾®è°ƒç­–ç•¥æ”¯æŒä¸‹çš„æ€§èƒ½ä¼˜åŒ–ï¼›
- **å¤šç»´å¤šé˜¶æ®µç¨³å¥å¼è¯„ä¼°ï¼š** ä»¥è‡ªç ”**RAGEval**æ–¹æ³•ä¸ºæ ¸å¿ƒï¼Œèå…¥é¢å‘æœ‰æ•ˆ/å…³é”®ä¿¡æ¯çš„å¤šé˜¶æ®µè¯„ä¼°æ–¹æ³•ï¼Œæ˜¾è‘—æå‡â€œæ¨¡å‹è¯„ä¼°â€çš„ç¨³å¥æ€§ï¼›
- **ç§‘ç ”å‹å¥½æ¢ç´¢å·¥ä½œé›†æˆï¼š** å†…ç½®**THUNLP-RAGç»„è‡ªç ”æ–¹æ³•**åŠå…¶ä»–å‰æ²¿RAGæ–¹æ³•ï¼Œæ”¯æŒæ¨¡å—çº§æŒç»­æ¢ç´¢ä¸ç ”å‘ã€‚

**ä»¥ä¸Šå…¨éƒ¨åŠŸèƒ½ï¼Œéƒ½å¯ä»¥ç›´æ¥é€šè¿‡ web ****å‰ç«¯****å¿«é€Ÿå®ç°ã€‚**

<div align="center">
    <img src='../assets/zh/image2.png' width=600>
</div>

## âš¡ï¸å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒä¾èµ–

**CUDA** ç‰ˆæœ¬åœ¨**12.2**åŠä»¥ä¸Š

**Python** ç‰ˆæœ¬åœ¨**3.10**åŠä»¥ä¸Š

### å¿«é€Ÿéƒ¨ç½²

ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹å¼éƒ¨ç½² BugAgaricï¼Œè¿è¡Œå‰ç«¯é¡µé¢ï¼š

1. **é€šè¿‡dockeréƒ¨ç½²**

è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œç„¶ååœ¨æµè§ˆå™¨è®¿é—®â€œ[http://localhost:8843](http://localhost:8843/)"ã€‚

```Bash
docker-compose up --build -d
```

2. **é€šè¿‡****conda****éƒ¨ç½²**

è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œç„¶ååœ¨æµè§ˆå™¨è®¿é—®â€œ[http://localhost:8843](http://localhost:8843/)"ã€‚

```Bash
# åˆ›å»ºcondaç¯å¢ƒ
conda create -n bugagaric python=3.10

#æ¿€æ´»condaç¯å¢ƒ
conda activate bugagaric

# å®‰è£…ç›¸å…³ä¾èµ–
pip install -r requirements.txt

# è¿è¡Œä»¥ä¸‹è„šæœ¬ä¸‹è½½æ¨¡å‹ï¼Œé»˜è®¤ä¸‹è½½åˆ°resources/modelsç›®å½•ä¸‹
# ä¸‹è½½çš„æ¨¡å‹åˆ—è¡¨åœ¨config/models_download_list.yamlä¸­
python scripts/download_model.py

# è¿è¡Œdemoé¡µé¢
streamlit run bugagaric/webui/webui.py --server.fileWatcherType none
```

### ç®€å•ä¸Šæ‰‹

https://github.com/user-attachments/assets/b04d5317-3378-4d4f-80e4-0e84dea54778


ä»¥ä¸Šè§†é¢‘ç®€å•æ¼”ç¤ºäº†ä¸Šæ‰‹ä½“éªŒè¿‡ç¨‹ï¼Œä¸ºäº†æ–¹ä¾¿æ‚¨ä½¿ç”¨ BugAgaricï¼Œæˆ‘ä»¬æä¾›äº†ä¸€ä»½è¯¦ç»†çš„è¯´æ˜æ–‡æ¡£ï¼Œæ–¹ä¾¿æ‚¨ä¸Šæ‰‹ BugAgaric å®Œæˆä½“éªŒå’Œè°ƒä¼˜æ¨¡å‹[ä½¿ç”¨è¯´æ˜](../user_guide/user_guide.md)ã€‚

å¦‚æœæ‚¨å¯¹å…¶ä¸­æ¶‰åŠåˆ°çš„æŠ€æœ¯æ–¹æ¡ˆæ›´æ„Ÿå…´è¶£ï¼Œæ‚¨å¯ä»¥é€šè¿‡[UltraRAGç³»åˆ—](../typical_implementation/typical_implementation.md)è·å–æ›´å…¨é¢çš„äº†è§£ã€‚

## ğŸ”§æ•´ä½“æ¶æ„

BugAgaric çš„æ¶æ„ç”±  **å‰ç«¯** **ã€æœåŠ¡å’Œåç«¯** ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼Œå…·ä½“ä»‹ç»å¦‚ä¸‹ï¼š

* **åç«¯**
  * **Modules ï¼ˆæ¨¡å—å±‚ï¼‰ï¼š**  å®šä¹‰ RAG ç³»ç»Ÿä¸­çš„å…³é”®ç»„æˆéƒ¨åˆ†ï¼Œä¾‹å¦‚çŸ¥è¯†åº“ã€æ£€ç´¢æ¨¡å‹ã€ç”Ÿæˆæ¨¡å‹ç­‰ï¼Œæ”¯æŒç”¨æˆ·åŸºäºæ ‡å‡†ç±»è¿›è¡Œçµæ´»å®šåˆ¶ã€‚
  * **Workflowï¼ˆæµç¨‹å±‚ï¼‰ï¼š** è§„èŒƒ RAG ç³»ç»Ÿçš„ç»„æˆæ¨¡å¼ï¼Œæä¾›æ ‡å‡†åŒ–çš„åŸºç¡€ RAG å®ç°ï¼Œå¹¶é›†æˆå›¢é˜Ÿè‡ªç ”çš„å…¸å‹æ–¹æ³•ï¼Œå¦‚ Adapative-Noteã€VisRAG ç­‰ï¼Œæ”¯æŒç”¨æˆ·çµæ´»æ­å»ºä¸è°ƒæ•´ï¼Œä¸”å°†æŒç»­è¡¥å……ä¸ä¼˜åŒ–ã€‚
  * **Function ï¼ˆåŠŸèƒ½å±‚ï¼‰ï¼š** è´Ÿè´£ RAG ç³»ç»Ÿä¼˜åŒ–è¿‡ç¨‹ä¸­çš„å…³é”®æ“ä½œï¼ŒåŒ…æ‹¬æ•°æ®åˆæˆã€ç³»ç»Ÿè¯„ä¼°å’Œæ¨¡å‹å¾®è°ƒç­‰ï¼ŒåŠ©åŠ›ç³»ç»Ÿæ€§èƒ½çš„å…¨é¢æå‡ã€‚
* **æœåŠ¡** ï¼šBugAgaric é™¤äº†æ”¯æŒåŸºäºå®ä¾‹æ–¹å¼æ­å»º RAG ç³»ç»Ÿï¼Œè¿˜æä¾›å¾®æœåŠ¡éƒ¨ç½²æ¨¡å¼ï¼Œä»¥ä¼˜åŒ–åº”ç”¨è¿‡ç¨‹ä¸­çš„ç”¨æˆ·ä½“éªŒï¼Œæ”¯æŒ Embedding Modelã€LLM ä»¥åŠå‘é‡æ•°æ®åº“ç­‰å…³é”®æœåŠ¡çš„çµæ´»éƒ¨ç½²ã€‚
* **å‰ç«¯** ï¼šå‰ç«¯åˆ’åˆ†ä¸ºèµ„æºç®¡ç†ä¸åŠŸèƒ½é¡µé¢ä¸¤ä¸ªéƒ¨åˆ†ã€‚å…¶ä¸­ï¼Œèµ„æºç®¡ç†åŒ…æ‹¬ **æ¨¡å‹ç®¡ç†** å’Œ  **çŸ¥è¯†åº“ç®¡ç†** ï¼Œè€ŒåŠŸèƒ½é¡µé¢æ¶µç›– **æ•°æ®æ„é€ ã€æ¨¡å‹è®­ç»ƒã€æ•ˆæœè¯„æµ‹** åŠ  **æ¨ç†ä½“éªŒ** ï¼Œä¸ºç”¨æˆ·æä¾›ä¾¿æ·çš„äº¤äº’æ”¯æŒã€‚

<div align="center">
    <img src='../assets/zh/image3.png' width=600>
</div>

## ğŸ’«æ•ˆæœè¯„ä¼°

ä¸ºäº†éªŒè¯ BugAgaric åœ¨å‚ç›´é¢†åŸŸçš„åº”ç”¨æ•ˆæœï¼Œæˆ‘ä»¬ä»¥æ³•å¾‹é¢†åŸŸä¸ºä¾‹ï¼Œæ”¶é›†äº†å„ç±»ä¸“ä¸šä¹¦ç±ï¼Œæ„å»ºäº†åŒ…å« **88 ä¸‡ä¸ªåˆ‡ç‰‡** çš„çŸ¥è¯†åº“ï¼Œå¹¶åŸºäºç›¸å¯¹å®Œå¤‡çš„è¯„æµ‹æ•°æ®é›†ï¼Œåœ¨ BugAgaric ä¸Šè¿›è¡Œäº†ç³»ç»Ÿæ€§è¯„ä¼°ã€‚ä»¥ä¸‹ä¸ºæˆ‘ä»¬çš„è¯„æµ‹ç»“æœã€‚å¦‚éœ€äº†è§£è¯„æµ‹çš„è¯¦ç»†å†…å®¹ï¼Œè¯·å‚é˜…ç›¸å…³æ–‡æ¡£ï¼š[è¯„æµ‹æŠ¥å‘Š](../evaluation_report/evaluation_report.md)ã€‚

| **ç«¯åˆ°ç«¯æ•ˆæœ**       | **æ³•æ¡é¢„æµ‹ï¼ˆ3-2ï¼‰****ROUGE-L** |
| -------------------------- | ------------------------------------ |
| **VanillaRAG**       | 40.75                                |
| **BugAgaric-DDR**     | 53.14                                |
| **BugAgaric-KBAlign** | 48.72                                |

| **ç«¯åˆ°ç«¯æ•ˆæœ**             | **å’¨è¯¢ï¼ˆ3-8ï¼‰****ROUGE-L** |
| -------------------------------- | -------------------------------- |
| **VanillaRAG**             | 23.65                            |
| **BugAgaric-Adaptive-Note** | 24.62                            |
| **VanillaRAG-finetune**    | 25.85                            |

## â€ğŸ¤è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹è´¡çŒ®è€…çš„ä»£ç æäº¤å’Œæµ‹è¯•ï¼Œæ¬¢è¿æ–°æˆå‘˜åŠ å…¥æˆ‘ä»¬ï¼Œè‡´åŠ›äºæ„å»ºå®Œæ•´ç”Ÿæ€ï¼

<a href="https://github.com/OpenBMB/BugAgaric/contributors">
  <img src="https://contrib.rocks/image?repo=OpenBMB/BugAgaric" />
</a>

## ğŸŒŸè¶‹åŠ¿

<a href="https://star-history.com/#OpenBMB/BugAgaric&Date">
 <picture>
   <source media="(prefers-color-scheme: dark)" srcset="https://api.star-history.com/svg?repos=OpenBMB/BugAgaric&type=Date&theme=dark" />
   <source media="(prefers-color-scheme: light)" srcset="https://api.star-history.com/svg?repos=OpenBMB/BugAgaric&type=Date" />
   <img alt="Star History Chart" src="https://api.star-history.com/svg?repos=OpenBMB/BugAgaric&type=Date" />
 </picture>
</a>

## âš–ï¸è®¸å¯

- æºä»£ç é‡‡ç”¨[Apache-2.0](https://github.com/OpenBMB/MiniCPM/blob/main/LICENSE)è®¸å¯è¯æˆæƒã€‚

## ğŸ“‘å¼•ç”¨

å¦‚æœæ‚¨è§‰å¾—è¿™ä¸ªä»“åº“æœ‰ç”¨ï¼Œè¯·è€ƒè™‘ç»™ä¸€ä¸ªæ˜Ÿæ ‡ â­ å¹¶å¼•ç”¨æ”¯æŒã€‚

```bib
@article{li2024rag,
  title={RAG-DDR: Optimizing Retrieval-Augmented Generation Using Differentiable Data Rewards},
  author={Li, Xinze and Mei, Sen and Liu, Zhenghao and Yan, Yukun and Wang, Shuo and Yu, Shi and Zeng, Zheni and Chen, Hao and Yu, Ge and Liu, Zhiyuan and others},
  journal={arXiv preprint arXiv:2410.13509},
  year={2024}
}

@article{yu2024visrag,
  title={Visrag: Vision-based retrieval-augmented generation on multi-modality documents},
  author={Yu, Shi and Tang, Chaoyue and Xu, Bokai and Cui, Junbo and Ran, Junhao and Yan, Yukun and Liu, Zhenghao and Wang, Shuo and Han, Xu and Liu, Zhiyuan and others},
  journal={arXiv preprint arXiv:2410.10594},
  year={2024}
}

@article{wang2024retriever,
  title={Retriever-and-Memory: Towards Adaptive Note-Enhanced Retrieval-Augmented Generation},
  author={Wang, Ruobing and Zha, Daren and Yu, Shi and Zhao, Qingfei and Chen, Yuxuan and Wang, Yixuan and Wang, Shuo and Yan, Yukun and Liu, Zhenghao and Han, Xu and others},
  journal={arXiv preprint arXiv:2410.08821},
  year={2024}
}

@article{zeng2024kbalign,
  title={KBAlign: KBAlign: Efficient Self Adaptation on Specific Knowledge Bases},
  author={Zeng, Zheni and Chen, Yuxuan and Yu, Shi and Yan, Yukun and Liu, Zhenghao and Wang, Shuo and Han, Xu and Liu, Zhiyuan and Sun, Maosong},
  journal={arXiv preprint arXiv:2411.14790},
  year={2024}
}

@article{zhu2024rageval,
  title={Rageval: Scenario specific rag evaluation dataset generation framework},
  author={Zhu, Kunlun and Luo, Yifan and Xu, Dingling and Wang, Ruobing and Yu, Shi and Wang, Shuo and Yan, Yukun and Liu, Zhenghao and Han, Xu and Liu, Zhiyuan and others},
  journal={arXiv preprint arXiv:2408.01262},
  year={2024}
}
```
